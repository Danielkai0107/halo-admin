# 通知點管理新 UI 使用說明

## 已部署完成 ✅

訪問：`https://safe-net-tw.web.app/community/notification-points`

---

## 新版介面說明

### 主頁面：Table 顯示我的通知點

```
┌──────────────────────────────────────────────────────┐
│ 通知點管理                            [點位設定]      │
│ 管理您社區的通知點位，當長者經過這些位置時...         │
├──────────────────────────────────────────────────────┤
│ 我的通知點 (3)                                        │
├──────────────────────────────────────────────────────┤
│ 接收器名稱 | 位置          | 類型    | 序號    | 時間 | 操作 │
│ 社區大門   | 台北市XX路     | 安全區域 | g-26... | 01/25 | 🗑️  │
│ 活動中心   | 社區2樓        | 觀察區域 | g-26... | 01/25 | 🗑️  │
│ 公園入口   | 公園路口       | 安全區域 | g-26... | 01/24 | 🗑️  │
└──────────────────────────────────────────────────────┘
```

### 點擊「點位設定」→ Modal 彈出

```
┌──────────────────────────────────────┐
│ 選擇通知點位                    [X]  │
├──────────────────────────────────────┤
│ 🔍 [搜尋接收器名稱、位置或序號...]   │
│ 共 10 個接收器，已選擇 3 個          │
├──────────────────────────────────────┤
│ ☑ 社區大門               [安全區域]  │
│   台北市大安區XX路                  │
│   g-26-01-0001                     │
├──────────────────────────────────────┤
│ ☐ 活動中心               [觀察區域]  │
│   社區2樓                           │
│   g-26-01-0002                     │
├──────────────────────────────────────┤
│ ☑ 公園入口               [安全區域]  │
│   公園路口                          │
│   g-26-01-0003                     │
├──────────────────────────────────────┤
│                       [關閉]         │
└──────────────────────────────────────┘
```

---

## 操作說明

### 新增通知點

1. 點擊右上角「點位設定」按鈕
2. Modal 開啟
3. 瀏覽或搜尋想要的 gateway
4. 點擊 gateway（整個卡片可點擊）
5. 勾選框打勾，背景變藍色
6. 點擊「關閉」
7. Table 自動更新，顯示新通知點

### 移除通知點

**方式 1（推薦）**：

- 在 Table 中點擊「刪除」按鈕
- 確認 → 移除

**方式 2**：

- 點擊「點位設定」開啟 Modal
- 找到已勾選的 gateway
- 點擊取消勾選
- 關閉 Modal → Table 更新

### 搜尋 Gateway

在 Modal 的搜尋框輸入：

- 名稱（如「大門」、「活動中心」）
- 位置（如「台北」、「2樓」）
- 序號（如「g-26」、「0001」）

列表即時過濾顯示符合的項目。

---

## UI 特點

### Table 特點

- 清晰的欄位分隔
- 帶顏色的類型標籤
- 懸停行變色（hover:bg-gray-50）
- 響應式設計（橫向可滾動）

### Modal 特點

- 大尺寸（max-width: 4xl）
- 搜尋框置頂
- Gateway 列表可滾動（max-height: 60vh）
- 已選擇的 gateway 有藍色底色
- 點擊整個卡片即可勾選

### 空狀態

**沒有通知點時**：

```
┌──────────────────────────┐
│                        │
│  尚未設定任何通知點        │
│    [開始設定]             │
└──────────────────────────┘
```

點擊「開始設定」直接開啟 Modal。

---

## 通知格式

### 統一格式（不可修改）

```
LINE 通知：
─────────────────
新偵測通知
─────────────────
{長輩姓名} 出現在 {位置} 附近

長輩：王小明
地點：社區大門
時間：2026/01/25 22:30

[查看地圖]
```

**位置來源**：

- 優先使用 `gateway.location`
- 如果沒有，使用 `gateway.name`

---

## 測試清單

### 基本功能（3 分鐘）

- [ ] 訪問通知點頁面
- [ ] 看到 Table（空或有資料）
- [ ] 點擊「點位設定」
- [ ] Modal 開啟
- [ ] 顯示所有 gateways

### 搜尋功能（1 分鐘）

- [ ] 輸入搜尋詞（如「大門」）
- [ ] 列表即時過濾
- [ ] 清除搜尋詞
- [ ] 恢復完整列表

### 勾選功能（2 分鐘）

- [ ] 點擊一個 gateway
- [ ] 勾選框打勾
- [ ] 背景變藍色
- [ ] 統計數字更新
- [ ] 點擊「關閉」
- [ ] Table 顯示新通知點

### 刪除功能（1 分鐘）

- [ ] 點擊 Table 中的刪除按鈕
- [ ] 確認對話框
- [ ] 確認刪除
- [ ] 通知點從 Table 移除

---

## 對比

### 操作步驟

| 操作       | 舊版                        | 新版                 |
| ---------- | --------------------------- | -------------------- |
| 查看通知點 | 需要捲動整個列表找已勾選的  | Table 直接顯示       |
| 新增通知點 | 捲動找到 gateway → 勾選     | 點位設定 → 搜尋/勾選 |
| 移除通知點 | 捲動找到 gateway → 取消勾選 | Table 點刪除         |
| 設定訊息   | 需要輸入並點擊更新          | 無需設定（統一格式） |

### 優勢

**新版更好的地方**：

- ✅ 清楚看到所有已設定的通知點（Table）
- ✅ 搜尋功能快速找到 gateway
- ✅ 操作更簡潔（無需設定訊息）
- ✅ 統計資訊一目了然
- ✅ Table 便於管理和檢視

---

## 完成

新版通知點 UI 已上線：

- Table 顯示我的通知點
- Modal 選擇點位
- 搜尋功能
- 統一通知格式

立即測試：`https://safe-net-tw.web.app/community/notification-points`
