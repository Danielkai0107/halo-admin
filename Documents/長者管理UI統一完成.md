# 長者管理 UI 統一完成

## 更新時間

2026-01-25 22:51

## 部署狀態

✅ 已部署到生產環境

---

## UI 變更

### 變更前：卡片列表

```
┌─────────────────┐ ┌─────────────────┐
│  👤             │ │  👤             │
│  王小明         │ │  李奶奶         │
│  男 · 75歲      │ │  女 · 80歲      │
│  📞 0912...     │ │  📞 0923...     │
│  XX路        │ │  YY路        │
│  [編輯]         │ │  [編輯]         │
└─────────────────┘ └─────────────────┘
```

### 變更後：Table 格式（與 Admin 一致）

```
┌────────────────────────────────────────────────────────────┐
│ 長者管理                                    [新增長者]      │
│ 總共 5 位長者                                              │
├────────────────────────────────────────────────────────────┤
│ [🔍 搜尋長者姓名、電話、地址...]                           │
├────────────────────────────────────────────────────────────┤
│ 長者      | 聯絡方式  | 設備狀態 | 狀態 | 最後活動 | 操作 │
├────────────────────────────────────────────────────────────┤
│ 👤 王小明 | 📞0912... | 已綁定   | 正常 | 5分鐘前  | ✏️🗑️ │
│ 男·75歲   |           | 設備-001 |      |          |      │
├────────────────────────────────────────────────────────────┤
│ 👤 李奶奶 | 📞0923... | 未綁定   | 正常 | 2小時前  | ✏️🗑️ │
│ 女·80歲   |           | ⚠️       |      |          |      │
└────────────────────────────────────────────────────────────┘
```

---

## 主要變更

### 1. Table 格式（與 Admin 一致）

**欄位**：

- **長者**：頭像 + 姓名 + 性別/年齡
- **聯絡方式**：電話
- **設備狀態**：已綁定/未綁定 + 設備名稱
- **狀態**：正常/住院/已故等
- **最後活動**：相對時間（5分鐘前）
- **操作**：編輯、刪除按鈕

### 2. 搜尋功能

**搜尋框置頂**：

- 輸入姓名、電話或地址
- 即時過濾
- 顯示符合的長者

### 3. 統計資訊

**Header 顯示**：

- 總共 X 位長者
- 清楚了解資料量

### 4. 空狀態優化

**沒有長者時**：

```
    👤
  暫無長者資料
  [新增第一位長者]
```

**搜尋無結果時**：

```
    👤
  找不到符合的長者
```

---

## 移除的功能

### 卡片式佈局

- ❌ 卡片網格顯示（grid-cols-2 lg:grid-cols-3）
- ❌ 卡片懸停編輯按鈕
- ❌ 地址顯示在卡片內

### 保留的功能

- ✅ Modal 新增/編輯
- ✅ 設備選擇功能
- ✅ 即時訂閱更新
- ✅ 點擊行查看詳情

---

## 操作說明

### 查看長者列表

**顯示方式**：Table 格式

- 一行一個長者
- 所有資訊一目了然
- 適合快速瀏覽和比對

### 搜尋長者

在搜尋框輸入：

- 姓名（如「王」、「小明」）
- 電話（如「0912」、「345」）
- 地址（如「XX路」、「3樓」）

列表即時過濾。

### 新增長者

1. 點擊「新增長者」按鈕
2. Modal 開啟
3. 填寫資料 + 選擇設備
4. 提交 → Table 更新

### 編輯長者

**方式 1**：

- 點擊 Table 中的編輯圖示
- Modal 開啟 → 修改 → 提交

**方式 2**：

- 點擊長者行（整行可點）
- 進入詳情頁面
- 點擊頂部編輯按鈕

### 刪除長者

- 點擊 Table 中的刪除圖示
- 確認對話框 → 確認 → 刪除

### 查看詳情

- 點擊長者行（整行可點擊）
- 進入詳情頁面
- 查看完整資訊和設備足跡

---

## 與 Admin 的差異

### 相同

- ✅ Table 格式
- ✅ 搜尋功能
- ✅ Modal 新增/編輯
- ✅ 設備選擇
- ✅ 統計資訊
- ✅ 空狀態處理

### 不同

**Community Portal**：

- ❌ 無「社區」欄位（只管理一個社區）
- ❌ 無批次選擇（勾選框）
- ❌ 無分頁功能（資料量較少）
- ✅ 點擊行進入詳情（Admin 也有）

**Admin**：

- ✅ 有「社區」欄位（管理所有社區）
- ✅ 有批次選擇和批次刪除
- ✅ 有分頁功能（資料量大）

---

## Table 欄位說明

### 長者

**顯示**：

- 頭像（如果有）或預設圖示
- 姓名（粗體）
- 性別 · 年齡（小字灰色）

**佔位**：較寬，主要資訊

### 聯絡方式

**顯示**：

- 電話圖示 + 電話號碼
- 如果沒有顯示「-」

### 設備狀態

**已綁定**：

- 藍色標籤「已綁定」
- 設備名稱（灰色底）

**未綁定**：

- 黃色標籤「未綁定」

### 狀態

**彩色標籤**：

- 正常（綠色）
- 不活躍（灰色）
- 住院（黃色）
- 已故（紅色）
- 遷出（藍色）

### 最後活動

**相對時間**：

- 5分鐘前
- 2小時前
- 3天前
- 無記錄（灰色）

**帶時鐘圖示**

### 操作

**ADMIN 可見**：

- 編輯圖示（藍色）
- 刪除圖示（紅色）

**MEMBER 不可見**：

- 操作欄位為空

---

## 互動說明

### 點擊行為

**點擊長者行**：

- 進入詳情頁面
- 查看完整資訊

**點擊編輯按鈕**：

- 開啟編輯 Modal
- 不會導航

**點擊刪除按鈕**：

- 顯示確認對話框
- 不會導航

### 懸停效果

- 行懸停變色（hover:bg-gray-50）
- 游標變為指標（cursor-pointer）

---

## 響應式設計

### 桌面版

- Table 完整顯示所有欄位
- 寬度足夠舒適閱讀

### 平板/手機

- Table 橫向可滾動（overflow-x-auto）
- 保持可用性

---

## 測試步驟

### 1. 訪問長者列表

```
https://safe-net-tw.web.app/community/elders
```

**驗證**：

- [ ] 看到 Table（不是卡片）
- [ ] 有搜尋框
- [ ] Header 顯示總數
- [ ] Table 有標題行

### 2. 測試搜尋

輸入「王」或電話號碼

**驗證**：

- [ ] 列表即時過濾
- [ ] 只顯示符合的長者
- [ ] 清除搜尋恢復完整列表

### 3. 測試新增

點擊「新增長者」

**驗證**：

- [ ] Modal 開啟
- [ ] 填寫資料
- [ ] 選擇設備
- [ ] 提交成功
- [ ] Table 更新

### 4. 測試編輯

點擊 Table 中的編輯圖示

**驗證**：

- [ ] Modal 開啟
- [ ] 顯示現有資料
- [ ] 當前設備正確顯示
- [ ] 修改後 Table 更新

### 5. 測試刪除

點擊刪除圖示

**驗證**：

- [ ] 確認對話框
- [ ] 確認後刪除
- [ ] Table 更新

### 6. 測試查看詳情

點擊長者行

**驗證**：

- [ ] 導航到詳情頁面
- [ ] 顯示完整資訊
- [ ] 設備足跡顯示

---

## 對比總結

| 項目     | 舊版（卡片） | 新版（Table） |
| -------- | ------------ | ------------- |
| 佈局     | 網格卡片     | 表格          |
| 資訊密度 | 較低         | 較高          |
| 瀏覽效率 | 需捲動       | 一目了然      |
| 編輯入口 | 懸停顯示     | 固定按鈕      |
| 適合場景 | 視覺展示     | 資料管理      |
| 與 Admin | 不一致       | ✅ 一致       |

---

## 部署資訊

**建置大小**：

- Community Portal: 665 KB (gzip: 204 KB)

**部署內容**：

- ElderListScreen 完全重寫
- 使用 Table 格式
- 添加搜尋功能

---

## 完成

Community Portal 長者管理 UI 已統一為 Table 格式，與 Admin 一致。

立即測試：`https://safe-net-tw.web.app/community/elders`
