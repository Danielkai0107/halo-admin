# Community Portal - 社區照護管理系統

## 系統簡介

Community Portal 是一個專為社區管理員（里長、協會）設計的照護管理平台，提供長者管理、設備監控、通知設定和數據報告功能。

---

## 立即開始

### 建立帳號
Admin: https://safe-net-tw.web.app/saas-users

### 登入使用
Community Portal: https://safe-net-tw.web.app/community

---

## 六大核心功能

### 1. 社區概況（Dashboard）

**數據總覽**：
- 總長者數、活躍率、設備覆蓋率、今日通知數
- 不活躍長者預警（需關懷名單）
- 設備健康狀況（低電量、離線）
- 熱門點位統計（Top 5）
- 活動趨勢分析

**報告匯出**：
- 完整統計報告
- 文字格式
- 適合週報/月報

### 2. 長者管理

**Table 格式**：
- 顯示長者資料、設備狀態、最後活動
- 搜尋功能
- Modal 新增/編輯（含設備選擇）

**長者詳情**：
- 基本資料
- 綁定設備
- 設備足跡（時間範圍篩選）

### 3. 設備清單

**Table 格式**：
- 顯示設備狀態、電池、信號
- 搜尋和篩選
- 查看詳情（Modal）
- 唯讀模式

### 4. 通知記錄

- 查看 LINE 通知歷史
- 按長者/日期篩選
- 顯示通知詳情

### 5. 通知點管理

**Table + Modal**：
- Table 顯示已設定的通知點
- Modal 選擇要監控的位置
- 搜尋功能
- 統一通知格式

---

## LINE 通知機制

### 通知格式

```
標題：新偵測通知
內容：{長輩姓名} 出現在 {位置} 附近
```

### 觸發條件

1. 長者有綁定設備
2. 設備經過 gateway
3. 該 gateway 被勾選為通知點
4. 自動發送給社區成員

---

## 關鍵指標說明

### Dashboard 核心數據

**活躍率**：
- 24小時內有活動的長者比例
- 關鍵安全指標
- 目標：維持 90% 以上

**設備覆蓋率**：
- 已綁定設備的長者比例
- 服務完整度指標
- 目標：100%

**不活躍長者**：
- 超過 24 小時未活動
- 最高優先關懷對象
- 目標：0 位

**低電量設備**：
- 電池少於 20%
- 需要更換
- 目標：0 個

**熱門點位**：
- 近7天感應次數排名
- 了解長者活動模式
- 用於服務規劃

---

## 使用場景

### 每日早會（5分鐘）

1. 開啟 Dashboard
2. 查看不活躍長者預警（紅色區塊）
3. 指派志工電話關懷
4. 檢查設備健康（黃色警告）
5. 安排維護工作

### 週報製作（10分鐘）

1. 開啟 Dashboard
2. 點擊「匯出報告」
3. 下載報告檔案
4. 整理成週報格式
5. 發送給相關人員

### 服務檢討（15分鐘）

1. 查看熱門點位統計
2. 評估活動安排
3. 查看活動趨勢
4. 調整服務策略

---

## 角色權限

### ADMIN（管理員）

- 完整功能權限
- 可新增/編輯/刪除
- 可設定通知點
- 可匯出報告

### MEMBER（成員）

- 查看所有資料
- 可匯出報告
- 不可編輯或刪除

---

## 技術特點

### 即時同步

- 使用 Firestore onSnapshot
- 資料變更立即反映
- 多人同時使用不衝突

### 認證隔離

- 獨立的 Firebase App 實例
- 可與 Admin 同時登入
- 不會互相登出

### 資料隔離

- 只能存取自己社區的資料
- Firestore Security Rules 保護
- 完全隔離，安全可靠

---

## 系統架構

```
Admin（總公司）
  ↓ 建立
SaaS 用戶
  ↓ 登入
Community Portal（社區管理員）
  ↓ 設定
通知點 + 長者管理
  ↓ 觸發
LINE 通知
  ↓ 接收
社區成員
```

---

## 完整功能列表

### Dashboard
- [x] 核心指標卡片
- [x] 不活躍長者預警
- [x] 設備健康狀況
- [x] 熱門點位統計
- [x] 活動趨勢分析
- [x] 通知點狀態
- [x] 報告匯出

### 長者管理
- [x] Table 顯示
- [x] 搜尋功能
- [x] Modal 新增/編輯
- [x] 設備選擇
- [x] 查看詳情
- [x] 設備足跡

### 設備清單
- [x] Table 顯示
- [x] 搜尋/篩選
- [x] 查看詳情

### 通知記錄
- [x] 顯示歷史
- [x] 篩選功能

### 通知點
- [x] Table 顯示
- [x] Modal 選擇
- [x] 搜尋功能

---

## 重要文檔

**快速開始**：
- `START_HERE.md` - 快速開始
- `使用指南_一頁版.md` - 一頁參考

**功能說明**：
- `Dashboard功能說明.md` - Dashboard 詳細說明
- `Community_Portal_完整指南.md` - 完整功能指南

**技術文檔**：
- `所有功能最終確認.md` - 功能確認
- `Community_Portal_最終完成.md` - 專案總結

---

## 部署資訊

**完成時間**：2026-01-25  
**版本**：1.0  
**建置大小**：688 KB (gzip: 209 KB)  
**部署文件**：25 個

---

## 聯絡資訊

**Firebase 專案**：safe-net-tw  
**生產環境**：https://safe-net-tw.web.app/community

---

**專案完成！所有功能已上線可用。**

立即訪問 Dashboard：https://safe-net-tw.web.app/community/dashboard
